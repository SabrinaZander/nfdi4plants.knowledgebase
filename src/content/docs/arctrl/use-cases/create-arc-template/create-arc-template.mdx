---
title: Create ARCs from SOPs
lastUpdated: 2025-06-24
authors:
  - dominik-brilhaus
sidebar:
  hidden: true
---

import { Steps } from '@astrojs/starlight/components';
import { Code } from '@astrojs/starlight/components'
import { Tabs, TabItem } from '@astrojs/starlight/components';

This guide exemplifies the use of ARCtrl to create an ARC from previously created SOP annotation tables.

## Use-case

- Labs / facilities that routinely, modular combine study and assay SOPs into new ARCs

## Example SOPs

- Locally stored pool of templates / SOPs
- Here e.g. one study "Plant Growth", one assay to describe the "protein digest with trypsin"

import PlantGrowth from './PlantGrowth.arctrl.json?raw'

<details>
  <summary>Study: PlantGrowth.arctrl.json</summary>

  <Code code={ PlantGrowth } lang="json"/>

</details>

import ProtDigest from './ProtDigest-Trypsin.arctrl.json?raw'

<details>
  <summary>Assay: ProtDigest-Trypsin.arctrl.json</summary>
  
  <Code code={ ProtDigest } lang="json"/>

</details>

## Example script

The following script is split in two parts:

The first part includes the variable information, that needs to be adapted per ARC as highlighted, i.e.
  - the path to the ARC (`arcPath`)
  - the `persons` to be added
  - the ARC's `title` and `identifier`
  - the paths to existing SOPs (`studyJsonPaths` and `assayJsonPaths`)

The second part creates the ARC based on the provided information and SOPs.

In this example, the script uses the two example SOPs introduced above, and it adds two contact persons. Both of these types could be extended to add more SOPs or more persons one per line, respectively. 


### Define inputs and outputs

```fsharp {8, 12-13, 18-19, 26, 32}
#r "nuget: ARCtrl"

open ARCtrl
open ARCtrl.Json
open ARCtrl.Helper

// Path where the ARC should be created
let arcPath = "template-arc"

// Contacts
let persons = ResizeArray[
  Person(firstName = "Viola", lastName = "Canina");
  Person(firstName = "Jasmine", lastName = "Beetroot", midInitials = "L");
  ]

// Investigation
let inv = ArcInvestigation(
    identifier = "AthalianaColdStressSugar",
    title = "Arabidopsis thaliana cold acclimation",
    contacts = persons
    )

// Paths to study SOP(s) of type ARCtrl.json
let studyJsonPaths = 
  [
    @"PlantGrowth.arctrl.json"
  ]

// Paths to assay SOP(s) of type ARCtrl.json
let assayJsonPaths = 
  [
    @"ProtDigest-Trypsin.arctrl.json"
  ]

```

### Combine and write the ARC

```fsharp

// Add study

let addStudyFromJson (studyJsonPath : string) = 

  let studyJsonString = System.IO.File.ReadAllText(studyJsonPath)
  let studyFromJson = ArcStudy.fromJsonString(studyJsonString)

  inv.AddStudy studyFromJson

studyJsonPaths
|> Seq.iter addStudyFromJson

// Add assay

let addAssayFromJson (assayJsonPath : string) = 

  let assayJsonString = System.IO.File.ReadAllText(assayJsonPath)
  let assayFromJson = ArcAssay.fromJsonString(assayJsonString)

  inv.AddAssay assayFromJson

assayJsonPaths
|> Seq.iter addAssayFromJson

// Create ARC

let arc = ARC( isa = inv )

// Write ARC to path

arc.Write arcPath
```